<!doctype html>
<html lang="no">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> <title>Brøyterute – V8.4b Lokal</title> <meta name="theme-color" content="#0f9d58"> <link rel="manifest" href="manifest.json"> <link rel="apple-touch-icon" href="icons/icon-192.png"> <link rel="stylesheet" href="https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Funpkg.com%2Fleaflet%401.9.4%2Fdist%2Fleaflet.css&data=05%7C02%7COystein.Gjeraldstveit2%40banenor.no%7C80f1239dc3f44487b29108de05896ffc%7C6ee535f230644ac981d84ceb2ff790c6%7C0%7C0%7C638954284994008430%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=FvF9gLt1ZxsZa%2F0SveXTeBTGkCaza0uNNJx5PkaCRFc%3D&reserved=0" crossorigin=""> <style> html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#f7f7f9;color:#111}
#app{min-height:100%;display:grid;grid-template-rows:auto auto auto 1fr auto} header{background:#111;color:#fff;padding:10px 12px;display:flex;align-items:center;gap:10px;flex-wrap:wrap}
header h1{font-size:16px;margin:0}
.subtitle{font-size:12px;opacity:.9}
.ok{display:inline-flex;align-items:center;gap:6px;margin-left:8px;padding:2px 8px;border-radius:999px;background:#0a7d33;color:#fff;font-size:11px}
.topbar,.bar{background:#fff;padding:8px 12px;border-bottom:1px solid #e6e6e6} .topbar{display:grid;grid-template-columns:1.6fr .6fr auto;gap:8px;align-items:center} .bar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.bar .spacer{flex:1}
.btn{height:42px;border:none;border-radius:10px;padding:0 12px;font-size:15px} .btn.primary{background:#0f9d58;color:#fff}
.btn.blue{background:#0061fe;color:#fff}
.btn.red{background:#c21d03;color:#fff}
.btn.gray{background:#eee;color:#111;border:1px solid #ccc}
.btn.small{height:34px;font-size:13px;padding:0 10px} .topbar input[type=text],.topbar select{height:46px;border-radius:10px;border:1px solid #bbb;padding:0 12px;font-size:18px} .content{display:grid;grid-template-columns:1fr}
#listWrap{padding:8px 0}
#tableScroller{overflow-x:auto;padding:0 12px} #mapWrap{border-top:1px solid #eee} #map{width:100%;height:320px} table{width:100%;border-collapse:collapse;background:#fff}
th,td{border-bottom:1px solid #eee;padding:10px 8px;vertical-align:middle;white-space:normal;word-break:keep-all;overflow-wrap:anywhere}
th.seq,td.seq{width:44px;text-align:center;font-weight:700}
th.name,td.name{min-width:280px}
th.task,td.task{width:120px}
th.det,td.det{width:140px}
th.sta,td.sta{width:80px;text-align:center}
th.act,td.act{width:200px}
.titleInput{display:block;width:100%;font-size:18px;line-height:1.25;border:1px solid #ddd;border-radius:10px;padding:10px 12px;background:#fff;color:#111} .name .meta{margin-top:8px} .name .meta input[type=text]{width:100%;min-height:40px;border:1px solid #e2e2e2;border-radius:8px;padding:6px 8px} .rowbtns{display:flex;gap:6px;flex-wrap:wrap}
.footer{background:#111;color:#fff;padding:8px 12px;display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
.badge{padding:3px 8px;border-radius:999px;font-size:12px;display:inline-block}
.b-green{background:#d4edda;color:#155724}
.b-yellow{background:#fff3cd;color:#856404}
.b-red{background:#f8d7da;color:#721c24}
.b-blue{background:#e1f0ff;color:#084298}
.thumbs{display:flex;gap:4px;flex-wrap:wrap;margin-top:6px}
.thumbs img{width:36px;height:36px;object-fit:cover;border-radius:6px;border:1px solid #ddd} .muted{color:#888} </style> </head> <body> <div id="app"> <header>  <div>
  <h1>Brøyterute</h1>
  <div class="subtitle" id="roundInfo">Runde 1 – Startet … <span id="jsok" class="ok" style="display:none;">● JS OK</span></div>  </div> </header>

<div class="topbar">
 <input id="addr" type="text" placeholder="Adresse/område (f.eks. Lerkevegen 4)">  <select id="taskSel">
  <option>Brøyte</option><option>Frese</option><option>Strø</option>
  <option>Brøyte og strø</option><option>Frese og strø</option><option>Brøytestikker</option>
 </select>
 <button id="addBtn" class="btn primary">Legg til</button> </div>

<div class="bar">
 <button id="optBtn" class="btn gray">Optimaliser</button>  <button id="fitAllBtn" class="btn gray">Vis alle på kart</button>  <button id="trackToggle" class="btn blue">Sporing: På</button>  <button id="cacheReset" class="btn red">Nullstill cache</button>  <div class="spacer"></div>  <button id="sendZipBtn" class="btn primary">Send rapport (.zip)</button>  <button id="doneBtn" class="btn gray">Ferdig (runde)</button> </div>

<div class="content">
 <div id="listWrap">
  <div id="tableScroller">
   <table id="tbl"><thead>
    <tr><th class="seq">#</th><th class="name">Navn</th><th class="task">Oppgave</th>
    <th class="det">Detaljer</th><th class="sta">Status</th><th class="act">Handling</th></tr>
   </thead><tbody></tbody></table>
  </div>
 </div>
 <div id="mapWrap"><div id="map" aria-label="Kart"></div></div> </div>

<div class="footer">
 <div>Live posisjon: <span id="posTxt">—</span></div>
 <div>Neste: <span id="nextTxt">—</span> <span class="muted">| Versjon 8.4b – Lokal (Oktober 2025)</span></div> </div> </div>

<input id="fileInput" type="file" accept="image/*" capture="environment" style="display:none">

<script src="https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Funpkg.com%2Fleaflet%401.9.4%2Fdist%2Fleaflet.js&data=05%7C02%7COystein.Gjeraldstveit2%40banenor.no%7C80f1239dc3f44487b29108de05896ffc%7C6ee535f230644ac981d84ceb2ff790c6%7C0%7C0%7C638954284994034927%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=JViLAynahAH23pZxvwNWnjNetxM7C3%2ByOO0uFjl0Kz4%3D&reserved=0" crossorigin=""></script> <script src="https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fjszip%403.10.1%2Fdist%2Fjszip.min.js&data=05%7C02%7COystein.Gjeraldstveit2%40banenor.no%7C80f1239dc3f44487b29108de05896ffc%7C6ee535f230644ac981d84ceb2ff790c6%7C0%7C0%7C638954284994056046%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=jNJx16MweTm2lmvTOM0B%2FkAcx%2BFchRp5qeXm2QPsp6k%3D&reserved=0"></script>
<script src="https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fjspdf%402.5.1%2Fdist%2Fjspdf.umd.min.js&data=05%7C02%7COystein.Gjeraldstveit2%40banenor.no%7C80f1239dc3f44487b29108de05896ffc%7C6ee535f230644ac981d84ceb2ff790c6%7C0%7C0%7C638954284994077869%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=9t7cvhNmZkfHbvLyyDBGXdN2maY4L0GRJ0vbT8%2FHE3o%3D&reserved=0"></script>

<!-- full JS her (kortet for plass) -->
<script>
/* ... (JavaScriptet som håndterer rute, lagring, sporing, rapport m.m.) ... */ </script>

</body>
</html>
