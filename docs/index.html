<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Hindre caching for å sikre at hybridversjonen lastes -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <title>Brøyterute</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="del-B.css?v=912h" />

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: #111;
      color: #fff;
    }
    nav {
      display: flex;
      gap: .75rem;
      padding: .75rem;
      justify-content: center;
      background: #1c1c1c;
      position: sticky;
      top: 0;
      z-index: 5;
    }
    nav button {
      background: #2a2a2a;
      color: #fff;
      border: none;
      padding: .6rem 1rem;
      border-radius: .6rem;
      cursor: pointer;
    }
    main { max-width: 980px; margin: 1rem auto; padding: 0 1rem; }
    section { display: none; }
    section.active { display: block; }
    footer { text-align: center; color: #aaa; font-size: .9rem; padding: 2rem 0 3rem; }
    h2 { margin-top: 0; }
  </style>
</head>

<body>
  <header>
    <h1 style="text-align:center; font-weight:800; letter-spacing:.5px; margin:1rem 0;">Brøyterute</h1>
    <nav>
      <button type="button" onclick="show('home')">Hjem</button>
      <button type="button" onclick="show('work')">Under arbeid</button>
      <button type="button" onclick="show('addresses')">Adresse-register</button>
      <button type="button" onclick="show('admin')">Admin</button>
      <button type="button" onclick="show('service')">Service</button>
    </nav>
  </header>

  <main>
    <!-- HJEM -->
    <section id="home" class="active">
      <h2>Velkommen til Brøyterute</h2>
      <p>Versjon <span id="ver-inline">—</span> – Romerike Trefelling</p>
      <button id="startBtn" style="background:#15803d;color:#fff;border:none;border-radius:.6rem;padding:.8rem 1.1rem;">
        Start ny runde
      </button>
    </section>

    <!-- UNDER ARBEID -->
    <section id="work">
      <h2>Under arbeid</h2>
      <div id="workPane"></div>
    </section>

    <!-- ADRESSE-REGISTER -->
    <section id="addresses">
      <h2>Adresse-register</h2>
      <div id="adrPane"></div>
    </section>

    <!-- ADMIN -->
    <section id="admin">
      <h2>Admin</h2>
      <div id="adminPane"></div>
    </section>

    <!-- SERVICE -->
    <section id="service">
      <h2>Service</h2>
      <div id="servicePane"></div>
    </section>
  </main>

  <footer>
    v<span id="ver">—</span> – Romerike Trefelling
  </footer>

  <script>
    /* Enkel visning av sider uten jQuery */
    function show(id) {
      document.querySelectorAll("main section").forEach(s => s.classList.remove("active"));
      const el = document.getElementById(id);
      if (el) el.classList.add("active");
      window.__activeView = id;
    }

    /* Sett versjonstekst dynamisk etter at Core lastes */
    document.addEventListener("DOMContentLoaded", () => {
      const putVersion = () => {
        const ver1 = document.getElementById('ver');
        const ver2 = document.getElementById('ver-inline');
        const v = (window.Core && window.Core.cfg && window.Core.cfg.VERSION) ? window.Core.cfg.VERSION : '—';
        if (ver1) ver1.textContent = v;
        if (ver2) ver2.textContent = v;
      };
      putVersion();
      window.addEventListener('load', putVersion);
    });
  </script>

  <!-- Modulene – med cache-busting for 9.12h (Hybrid) -->
  <script src="del-C.js?v=912h" defer></script>
  <script src="del-D.js?v=912h" defer></script>
  <script src="del-E.js?v=912h" defer></script>
  <script src="del-F.js?v=912h" defer></script>
  <script src="del-G.js?v=912h" defer></script>
  <script src="del-H.js?v=912h" defer></script>
</body>
</html>