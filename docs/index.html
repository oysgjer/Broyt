<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Brøyterute</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="del-B.css">
  <style>
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:#111;color:#fff}
    nav{display:flex;justify-content:center;gap:10px;padding:10px;background:#222;position:sticky;top:0;z-index:10}
    nav button{background:#333;color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:500}
    nav button:hover{background:#444}
    section{display:none;padding:1rem;max-width:1000px;margin:auto}
    section.active{display:block}
    footer{text-align:center;padding:12px;font-size:12px;color:#aaa;border-top:1px solid #333}
    button.main{background:#00804b;border:none;color:#fff;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:15px;font-weight:600}
    button.main:hover{background:#00985d}
  </style>
</head>

<body>
  <nav>
    <button type="button" data-tab="home">Hjem</button>
    <button type="button" data-tab="work">Under arbeid</button>
    <button type="button" data-tab="addresses">Adresse-register</button>
    <button type="button" data-tab="admin">Admin</button>
    <button type="button" data-tab="service">Service</button>
  </nav>

  <section id="home" class="active">
    <h2>Velkommen til Brøyterute</h2>
    <p>Versjon 9.11 – Romerike Trefelling</p>
    <button id="startBtn" class="main">Start ny runde</button>
  </section>

  <section id="work">
    <h2>Under arbeid</h2>
    <div id="workList"></div>
  </section>

  <section id="addresses">
    <h2>Adresse-register</h2>
    <div id="addressList"></div>
  </section>

  <section id="admin">
    <h2>Admin</h2>
    <div id="adminCatalog"></div>
    <div id="adminMap"></div>
  </section>

  <section id="service">
  <!-- Del G skriver hele innholdet inn i denne -->
  <div id="servicePane"></div>
</section>

  <footer>v9.11 – Romerike Trefelling</footer>

  <!-- Fanenavigasjon + enkel feillogger -->
  <script>
    function show(id){
      document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
      const el = document.getElementById(id);
      if(el) el.classList.add("active");
      // hint til modulene (del-*) hvis de lytter på hash/bytte
      document.body.dataset.tab = id;
    }

    // wire UI umiddelbart
    document.addEventListener('DOMContentLoaded', ()=>{
      // top-tabs
      document.querySelectorAll('nav button[data-tab]').forEach(btn=>{
        btn.addEventListener('click', ()=> show(btn.dataset.tab));
      });
      // “Start ny runde” -> Work
      const start = document.getElementById('startBtn');
      if(start) start.addEventListener('click', ()=> show('work'));
    });

    // rød feillinje nede hvis noe JS feiler
    window.addEventListener('error', e=>{
      const bar = document.createElement('div');
      bar.style.cssText='position:fixed;left:0;right:0;bottom:0;background:#b00020;color:#fff;padding:8px 12px;font:12px system-ui;z-index:99999';
      bar.textContent='JS-feil: ' + (e.message||'ukjent');
      document.body.appendChild(bar);
      console.error(e);
    });
  </script>

  <!-- Modulene (pass på at filnavnene matcher i /docs/) -->
  <script src="del-C.js?v=911" defer></script>
  <script src="del-D.js?v=911" defer></script>
  <script src="del-E.js?v=911" defer></script>
  <script src="del-F.js?v=911" defer></script>
  <script src="del-G.js?v=911" defer></script>
  <script src="del-H.js?v=911" defer></script>

  <!-- PWA -->
  <script>
    if('serviceWorker'in navigator){
      navigator.serviceWorker.register('sw.js').catch(()=>{});
    }
  </script>
</body>
</html>