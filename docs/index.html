<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>BrÃ¸yterute â€“ Romerike Trefelling</title>

<!-- PWA -->
<link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#0a0f1c">
<link rel="apple-touch-icon" href="./icons/icon-512.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- CSS -->
<link rel="stylesheet" href="./del-B.css">

<!-- JS-deler -->
<script defer src="./del-A.js"></script>
<script defer src="./del-B.js"></script>
<script defer src="./del-C.js"></script>
<script defer src="./del-D.js"></script>
<script defer src="./del-E.js"></script>
<script defer src="./del-F.js"></script>
<script defer src="./del-G.js"></script>
<script defer src="./del-H.js"></script>
<script defer src="./sw.js"></script>

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, sans-serif;
  background: #0a0f1c;
  color: #e6edf3;
}

nav {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
  padding: 10px;
  border-bottom: 1px solid #2b3445;
  background: #0a0f1c;
  position: sticky;
  top: 0;
  z-index: 5;
}

nav button {
  border-radius: 10px;
  padding: 8px 14px;
  font-size: 16px;
  border: 1px solid #3b465a;
  background: #182233;
  color: #f0f4f8;
}
nav button.active { background: #1e3a8a; border-color: #60a5fa; }
main { max-width: 860px; margin: auto; padding: 12px; }
.card { background: #0b1220; border: 1px solid #2b3445; border-radius: 14px; padding: 16px; margin: 12px 0; }

@media (prefers-color-scheme: light) {
  body { background: #fafafa; color: #111; }
  nav { background: #fff; border-bottom-color: #e5e7eb; }
  nav button { background: #e9eef6; color: #111; border-color: #cfd8e3; }
  nav button.active { background: #007aff; border-color: #007aff; color: #fff; }
  .card { background: #fff; border-color: #e5e7eb; }
}

.install-hint {
  display: none;
  background: #1d4ed8;
  color: #fff;
  text-align: center;
  padding: 10px;
  border-radius: 10px;
  margin-top: 12px;
  font-size: 15px;
}
</style>
</head>

<body>
<nav>
  <button id="nav-home" onclick="showPage('home')">Hjem</button>
  <button id="nav-work" onclick="showPage('work')">Under arbeid</button>
  <button id="nav-service" onclick="showPage('service')">Service</button>
  <button id="nav-status" onclick="showPage('status')">Status</button>
  <button id="nav-admin" onclick="showPage('admin')">Admin</button>
  <span style="margin-left:auto;font-size:12px;opacity:.7">v9.12i</span>
</nav>

<main>

<!-- HJEM -->
<section id="home" class="card">
  <h2 class="title">Hjem</h2>
  <p>Velkommen til BrÃ¸yterute. Sett fÃ¸rer, retning og utstyr for dagens runde.</p>

  <label>FÃ¸rer:<br>
    <input id="a_driver" placeholder="Navn" style="width:100%">
  </label><br><br>

  <label>Retning rute:<br>
    <select id="a_dir" style="width:100%">
      <option value="Normal">Normal</option>
      <option value="Motsatt">Motsatt</option>
    </select>
  </label><br><br>

  <fieldset class="card" style="margin:0">
    <legend>Utstyr</legend>
    <label><input type="checkbox" id="a_eq_plow"> BrÃ¸yteskjÃ¦r</label><br>
    <label><input type="checkbox" id="a_eq_fres"> Fres</label><br>
    <label><input type="checkbox" id="a_eq_sand"> StrÃ¸/sand</label>
  </fieldset><br>

  <button id="a_start" class="btn btn-lg">ğŸ Start runde</button>

  <div id="installPrompt" class="install-hint">ğŸ“² Installer BrÃ¸yterute pÃ¥ Hjem-skjerm</div>
</section>

<!-- UNDER ARBEID -->
<section id="work" class="card" style="display:none">
  <h2 class="title">Under arbeid</h2>

  <div class="progress-all">
    <div id="b_prog_me" class="bar bar-me"></div>
    <div id="b_prog_other" class="bar bar-other"></div>
  </div>

  <div class="now-stack">
    <div class="now now-wide">
      <div class="now-head"><span class="now-icon">ğŸšœ</span><span class="lbl">NÃ¥</span></div>
      <div id="b_now" class="val now-val">â€“</div>
    </div>
    <div class="next now-wide">
      <div class="next-head"><span class="next-icon">â¡ï¸</span><span class="lbl">Neste</span></div>
      <div id="b_next" class="val next-val">â€“</div>
    </div>
  </div>

  <div class="actions-grid">
    <button id="act_start" class="btn btn-lg">â–¶ï¸ Start</button>
    <button id="act_skip" class="btn btn-lg">â­ï¸ Hopp over</button>
    <button id="act_block" class="btn btn-lg btn-warn">ğŸš« Ikke mulig</button>
    <button id="act_done" class="btn btn-lg btn-affirm">âœ… Ferdig</button>
    <button id="act_acc" class="btn btn-lg btn-ghost">âš ï¸ Uhell</button>
  </div>

  <div id="work-controls" class="card" style="margin-top:14px">
    <div class="pills" style="margin-bottom:10px">
      <span class="pill">Runde: <strong id="b_round">â€“</strong></span>
      <span class="pill">Oppdrag: <strong id="b_job">â€“</strong></span>
      <span class="pill">Retning: <strong id="b_dir">â€“</strong></span>
      <span class="pill">Sesong: <strong id="b_season">â€“</strong></span>
      <span class="pill">Synk: <strong id="b_sync">â€”</strong></span>
    </div>
    <div class="row" style="gap:12px;flex-wrap:wrap">
      <button id="b_nav_top" class="btn btn-primary btn-lg">ğŸ§­ NAVIGER</button>
      <button id="b_sync_btn" class="btn btn-lg">â†» Synk</button>
      <button id="b_save_btn" class="btn btn-lg">ğŸ’¾ Lagre</button>
      <button id="b_finish_btn" class="btn btn-lg">ğŸ Avslutt runde</button>
    </div>
  </div>
</section>

<!-- SERVICE -->
<section id="service" class="card" style="display:none">
  <h2 class="title">Service</h2>
  <p>Etter runden â€“ huk av for utfÃ¸rt vedlikehold:</p>
  <label><input type="checkbox"> SkjÃ¦r smurt</label><br>
  <label><input type="checkbox"> Fres smurt</label><br>
  <label><input type="checkbox"> Forstilling smurt</label><br>
  <label><input type="checkbox"> OljenivÃ¥ sjekket foran</label><br>
  <label><input type="checkbox"> OljenivÃ¥ sjekket bak</label><br>
  <label><input type="checkbox"> Etterfylt olje</label><br>
  <label><input type="checkbox"> Fylt diesel</label><br>
  <label><input type="checkbox"> Annet</label><br><br>
  <textarea rows="4" style="width:100%" placeholder="Notaterâ€¦"></textarea><br>
  <button class="btn btn-lg">ğŸ’¾ Lagre service</button>
</section>

<!-- STATUS -->
<section id="status" class="card" style="display:none">
  <h2 class="title">Status</h2>
  <p>Oversikt over alle adresser og status for runden.</p>
  <button class="btn">âŸ³ Oppdater</button>
  <button class="btn">ğŸ§¹ Nullstill viste</button>
</section>

<!-- ADMIN -->
<section id="admin" class="card" style="display:none">
  <h2 class="title">Admin</h2>
  <p>AdministrasjonsverktÃ¸y og vedlikehold.</p>
</section>

</main>

<script>
function showPage(id){
  document.querySelectorAll('main section').forEach(s=>s.style.display='none');
  document.getElementById(id).style.display='block';
  document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
  document.getElementById('nav-'+id).classList.add('active');
  location.hash = '#'+id;
}

// Installer-app-knapp
let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  const btn = document.getElementById('installPrompt');
  btn.style.display = 'block';
  btn.addEventListener('click', async () => {
    btn.style.display = 'none';
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    deferredPrompt = null;
  });
});

// iOS hint (viser hvis iOS Safari)
if (/iphone|ipad|ipod/i.test(window.navigator.userAgent)){
  const hint = document.getElementById('installPrompt');
  hint.innerHTML = "ğŸ“² Trykk <strong>Del</strong> â†’ <strong>Legg til pÃ¥ Hjem-skjerm</strong>";
  hint.style.display = 'block';
}

showPage('home');
</script>

</body>
</html>