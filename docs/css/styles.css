/* =========================================================
   Brøyt — styles.css (mørk som standard)
   ========================================================= */

/* ---------- Tema / farger ---------- */
:root{
  color-scheme: dark;
  --bg: #0b1320;           /* sidebakgrunn */
  --surface: #111a2a;      /* panel */
  --surface-2:#0e1726;     /* dypere panel */
  --text: #e8eefc;         /* primærtekst */
  --muted:#9aa8bf;         /* sekundærtekst */
  --sep: rgba(255,255,255,.10);

  --primary:#2563eb;       /* primærknapp */
  --primary-2:#1d4ed8;

  --ok:#22c55e;
  --warn:#f59e0b;
  --err:#ef4444;

  --chip-bg: rgba(255,255,255,.06);
  --chip-br: rgba(255,255,255,.10);
}

@media (prefers-color-scheme: light){
  :root{
    color-scheme: light;
    --bg:#f6f7fb;
    --surface:#ffffff;
    --surface-2:#ffffff;
    --text:#0b1320;
    --muted:#64748b;
    --sep: rgba(0,0,0,.10);

    --chip-bg: rgba(0,0,0,.05);
    --chip-br: rgba(0,0,0,.08);
  }
}

/* ---------- Reset ---------- */
*{ box-sizing:border-box }
html, body { height: 100% }
body{
  margin:0;
  font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* iOS: aldri utilsiktet blur/transparens på body/html */
html, body{ -webkit-backdrop-filter:none !important; backdrop-filter:none !important; }

/* ---------- Appbar ---------- */
.appbar{
  position: sticky; top:0; z-index: 1000;
  display:flex; align-items:center; gap:12px;
  height:56px; padding:0 12px;
  background: var(--surface);
  border-bottom: 1px solid var(--sep);
}
.icon-btn{
  width:40px; height:40px; border-radius:10px;
  display:grid; place-items:center;
  border:0; background:transparent; color:var(--text);
  font-size:20px;
}
.icon-btn:active{ background: var(--sep) }
.appbar-title{ font-weight:700; letter-spacing:.2px }
.appbar-right{ margin-left:auto; display:flex; gap:10px; align-items:center }
.badge{ font-size:.95rem; opacity:.95 }
.dot{ display:inline-block; width:.7rem; height:.7rem; border-radius:999px; vertical-align:middle }
.dot-ok{ background: var(--ok) }
.dot-warn{ background: var(--warn) }
.dot-err{ background: var(--err) }
.dot-unknown{ background:#6b7280 }
.dot-on{ background: var(--ok) }
.dot-off{ background:#9ca3af }

/* ---------- Drawer + scrim (solid, ikke gjennomsiktig) ---------- */
#scrim{
  position: fixed; inset:0; z-index: 1001;
  background: rgba(0,0,0,.65);
  opacity:0; pointer-events:none; transition: opacity .2s ease;
}
#scrim.show{ opacity:1; pointer-events:auto }

.drawer, #drawer, aside#drawer{
  position: fixed; left:0; top:0;
  width: 82vw; max-width: 340px; height: 100vh;
  background: var(--surface) !important; /* SOLID */
  color: var(--text);
  border-right: 1px solid var(--sep);
  transform: translateX(-100%);
  transition: transform .22s ease;
  z-index: 1002;               /* over scrim */
  pointer-events: none;        /* klikk blokkeres når lukket */
  -webkit-backdrop-filter:none !important; backdrop-filter:none !important;
  box-shadow: 0 12px 40px rgba(0,0,0,.45);
}
.drawer.open{ transform: translateX(0); pointer-events: auto }

.drawer-header{
  display:flex; align-items:center; justify-content:space-between;
  gap:8px; padding:12px 14px;
  font-weight:700; border-bottom:1px solid var(--sep);
}
.drawer-content{ padding:10px 8px; height: calc(100vh - 56px); overflow:auto }
.drawer-section{ margin:10px 8px 6px; font-weight:700; color:var(--muted) }

.drawer-list{ list-style:none; margin:8px 0 14px; padding:0 }
.drawer-link{
  display:flex; align-items:center; gap:12px;
  padding:10px 12px; border-radius:12px;
  text-decoration:none; color:inherit;
}
.drawer-link:hover{ background: var(--chip-bg) }
.drawer-link .emoji{ width:22px; text-align:center }

.card{
  background: var(--surface-2);
  border:1px solid var(--sep); border-radius:14px;
  padding:12px;
}
.row{ display:flex; align-items:center; gap:10px; flex-wrap:wrap }

/* ---------- Innhold ---------- */
main{ padding:18px; }
section[hidden]{ display:none !important }

h1{ font-size: clamp(22px, 2.4rem, 32px); margin: 6px 0 14px }
.label-muted{ color: var(--muted); font-weight:600; margin-bottom:6px }

/* ---------- Form / inputs ---------- */
.field{ display:block; margin:14px 0 10px }
.field > span{ display:block; margin-bottom:6px; color: var(--muted) }

.input, select, .input-like, textarea{
  width:100%; border:1px solid var(--sep); border-radius:12px;
  background:transparent; color:var(--text);
  padding:12px 12px; outline:none;
}
.input:focus, select:focus, .input-like:focus-within, textarea:focus{
  border-color: rgba(37,99,235,.6); box-shadow: 0 0 0 3px rgba(37,99,235,.15);
}
.input-like{ display:block }
.checkbox-row{ display:flex; gap:14px; flex-wrap:wrap }
.checkbox-row label{ display:flex; align-items:center; gap:8px }

.grid2{ display:grid; gap:12px; grid-template-columns: repeat(2,minmax(0,1fr)) }
@media (max-width:560px){ .grid2{ grid-template-columns: 1fr } }

/* ---------- Knappestiler ---------- */
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:11px 16px; border:0; border-radius:14px;
  background: var(--primary); color:#fff; font-weight:700;
}
.btn:active{ transform: translateY(1px) }
.btn-ghost{
  background: transparent; color: var(--text);
  border:1px solid var(--sep);
}
.btn.badge{ font-weight:600 }
.btn--ok{ background: var(--ok); color:#052012 }
.btn--warn{ background: var(--warn) }
.btn--err{ background: var(--err) }

/* Pulserende state (brukes når noe «venter») */
.pulse{
  animation: pulse 1.6s ease-in-out infinite;
}
@keyframes pulse{
  0%{ box-shadow: 0 0 0 0 rgba(37,99,235,.45) }
  70%{ box-shadow: 0 0 0 12px rgba(37,99,235,0) }
  100%{ box-shadow: 0 0 0 0 rgba(37,99,235,0) }
}

/* ---------- Work (Under arbeid) ---------- */
.work-top{
  border:1px solid var(--sep); border-radius:16px;
  padding:12px; margin-bottom:14px; background: var(--surface-2);
}
.work-prog{
  position:relative; height:12px; border-radius:999px;
  background: rgba(255,255,255,.08); overflow:hidden;
}
.work-prog .me{
  position:absolute; left:0; top:0; bottom:0; width:0%;
  background: var(--ok);
}
.work-prog .other{
  position:absolute; left:0; top:0; bottom:0; width:0%;
  background: #a78bfa; opacity:.85;
}
.work-caption{ display:flex; justify-content:space-between; color:var(--muted); margin-top:6px }

.work-card{
  background: var(--surface-2);
  border:1px solid var(--sep); border-radius:16px; padding:14px;
}
.addr-now{ font-size: clamp(22px, 2.2rem, 30px); font-weight:800; letter-spacing:.2px }
.addr-next{ font-size: clamp(16px, 1.4rem, 20px); opacity:.9 }

.btn-grid{
  display:grid; gap:10px; margin-top:14px;
  grid-template-columns: repeat(2, minmax(0,1fr));
}
.work-meta{ color:var(--muted); margin-top:10px }

/* Små skjermer: bedre padding */
@media (max-width:420px){
  main{ padding:14px }
}

/* ---------- Chips / snarveier i drawer ---------- */
.btn-ghost .emoji{ width:20px; text-align:center }
.drawer .btn-ghost{
  background: var(--chip-bg);
  border-color: var(--chip-br);
  padding:8px 10px; border-radius:12px;
}

/* ---------- iOS safe-area (notch) ---------- */
@supports (padding: max(0px)){
  .appbar{ padding-left: max(12px, env(safe-area-inset-left));
           padding-right: max(12px, env(safe-area-inset-right)); }
  main{ padding-left: max(18px, env(safe-area-inset-left));
        padding-right: max(18px, env(safe-area-inset-right));
        padding-bottom: max(18px, env(safe-area-inset-bottom)); }
}

/* ---------- Ekstra util ---------- */
.muted{ color: var(--muted) }
.hidden{ display:none !important }